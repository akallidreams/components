{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {\n    get: v,\n    set: s,\n    enumerable: true,\n    configurable: true\n  });\n}\n\nvar $319e236875307eab$exports = {};\n$parcel$export($319e236875307eab$exports, \"announce\", function () {\n  return $319e236875307eab$export$a9b970dcc4ae71a9;\n});\n$parcel$export($319e236875307eab$exports, \"clearAnnouncer\", function () {\n  return $319e236875307eab$export$d10ae4f68404609a;\n});\n$parcel$export($319e236875307eab$exports, \"destroyAnnouncer\", function () {\n  return $319e236875307eab$export$d8686216b8b81b2f;\n});\nvar $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY = 7000;\nvar $319e236875307eab$var$liveAnnouncer = null;\n\nfunction $319e236875307eab$export$a9b970dcc4ae71a9(message) {\n  var assertiveness = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'assertive';\n  var timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY;\n  if (!$319e236875307eab$var$liveAnnouncer) $319e236875307eab$var$liveAnnouncer = new $319e236875307eab$var$LiveAnnouncer();\n  $319e236875307eab$var$liveAnnouncer.announce(message, assertiveness, timeout);\n}\n\nfunction $319e236875307eab$export$d10ae4f68404609a(assertiveness) {\n  if ($319e236875307eab$var$liveAnnouncer) $319e236875307eab$var$liveAnnouncer.clear(assertiveness);\n}\n\nfunction $319e236875307eab$export$d8686216b8b81b2f() {\n  if ($319e236875307eab$var$liveAnnouncer) {\n    $319e236875307eab$var$liveAnnouncer.destroy();\n    $319e236875307eab$var$liveAnnouncer = null;\n  }\n}\n\nvar $319e236875307eab$var$LiveAnnouncer = function () {\n  function $319e236875307eab$var$LiveAnnouncer() {\n    _classCallCheck(this, $319e236875307eab$var$LiveAnnouncer);\n\n    this.node = document.createElement('div');\n    this.node.dataset.liveAnnouncer = 'true';\n\n    _extends(this.node.style, {\n      border: 0,\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      height: 1,\n      margin: '0 -1px -1px 0',\n      overflow: 'hidden',\n      padding: 0,\n      position: 'absolute',\n      width: 1,\n      whiteSpace: 'nowrap'\n    });\n\n    this.assertiveLog = this.createLog('assertive');\n    this.node.appendChild(this.assertiveLog);\n    this.politeLog = this.createLog('polite');\n    this.node.appendChild(this.politeLog);\n    document.body.prepend(this.node);\n  }\n\n  _createClass($319e236875307eab$var$LiveAnnouncer, [{\n    key: \"createLog\",\n    value: function createLog(ariaLive) {\n      var node = document.createElement('div');\n      node.setAttribute('role', 'log');\n      node.setAttribute('aria-live', ariaLive);\n      node.setAttribute('aria-relevant', 'additions');\n      return node;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.node) return;\n      document.body.removeChild(this.node);\n      this.node = null;\n    }\n  }, {\n    key: \"announce\",\n    value: function announce(message) {\n      var assertiveness = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'assertive';\n      var timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY;\n      if (!this.node) return;\n      var node = document.createElement('div');\n      node.textContent = message;\n      if (assertiveness === 'assertive') this.assertiveLog.appendChild(node);else this.politeLog.appendChild(node);\n      if (message !== '') setTimeout(function () {\n        node.remove();\n      }, timeout);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(assertiveness) {\n      if (!this.node) return;\n      if (!assertiveness || assertiveness === 'assertive') this.assertiveLog.innerHTML = '';\n      if (!assertiveness || assertiveness === 'polite') this.politeLog.innerHTML = '';\n    }\n  }]);\n\n  return $319e236875307eab$var$LiveAnnouncer;\n}();\n\nexport { $319e236875307eab$export$a9b970dcc4ae71a9 as announce, $319e236875307eab$export$d10ae4f68404609a as clearAnnouncer, $319e236875307eab$export$d8686216b8b81b2f as destroyAnnouncer };","map":{"version":3,"sources":["packages/@react-aria/live-announcer/src/LiveAnnouncer.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\ntype Assertiveness = 'assertive' | 'polite';\n\n/* Inspired by https://github.com/AlmeroSteyn/react-aria-live */\nconst LIVEREGION_TIMEOUT_DELAY = 7000;\n\nlet liveAnnouncer: LiveAnnouncer = null;\n\n/**\n * Announces the message using screen reader technology.\n */\nexport function announce(\n  message: string,\n  assertiveness: Assertiveness = 'assertive',\n  timeout = LIVEREGION_TIMEOUT_DELAY\n) {\n  if (!liveAnnouncer) {\n    liveAnnouncer = new LiveAnnouncer();\n  }\n\n  liveAnnouncer.announce(message, assertiveness, timeout);\n}\n\n/**\n * Stops all queued announcements.\n */\nexport function clearAnnouncer(assertiveness: Assertiveness) {\n  if (liveAnnouncer) {\n    liveAnnouncer.clear(assertiveness);\n  }\n}\n\n/**\n * Removes the announcer from the DOM.\n */\nexport function destroyAnnouncer() {\n  if (liveAnnouncer) {\n    liveAnnouncer.destroy();\n    liveAnnouncer = null;\n  }\n}\n\n// LiveAnnouncer is implemented using vanilla DOM, not React. That's because as of React 18\n// ReactDOM.render is deprecated, and the replacement, ReactDOM.createRoot is moved into a\n// subpath import `react-dom/client`. That makes it hard for us to support multiple React versions.\n// As a global API, we can't use portals without introducing a breaking API change. LiveAnnouncer\n// is simple enough to implement without React, so that's what we do here.\n// See this discussion for more details: https://github.com/reactwg/react-18/discussions/125#discussioncomment-2382638\nclass LiveAnnouncer {\n  node: HTMLElement;\n  assertiveLog: HTMLElement;\n  politeLog: HTMLElement;\n\n  constructor() {\n    this.node = document.createElement('div');\n    this.node.dataset.liveAnnouncer = 'true';\n    // copied from VisuallyHidden\n    Object.assign(this.node.style, {\n      border: 0,\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      height: 1,\n      margin: '0 -1px -1px 0',\n      overflow: 'hidden',\n      padding: 0,\n      position: 'absolute',\n      width: 1,\n      whiteSpace: 'nowrap'\n    });\n\n    this.assertiveLog = this.createLog('assertive');\n    this.node.appendChild(this.assertiveLog);\n\n    this.politeLog = this.createLog('polite');\n    this.node.appendChild(this.politeLog);\n\n    document.body.prepend(this.node);\n  }\n\n  createLog(ariaLive: string) {\n    let node = document.createElement('div');\n    node.setAttribute('role', 'log');\n    node.setAttribute('aria-live', ariaLive);\n    node.setAttribute('aria-relevant', 'additions');\n    return node;\n  }\n\n  destroy() {\n    if (!this.node) {\n      return;\n    }\n\n    document.body.removeChild(this.node);\n    this.node = null;\n  }\n\n  announce(message: string, assertiveness = 'assertive', timeout = LIVEREGION_TIMEOUT_DELAY) {\n    if (!this.node) {\n      return;\n    }\n\n    let node = document.createElement('div');\n    node.textContent = message;\n\n    if (assertiveness === 'assertive') {\n      this.assertiveLog.appendChild(node);\n    } else {\n      this.politeLog.appendChild(node);\n    }\n\n    if (message !== '') {\n      setTimeout(() => {\n        node.remove();\n      }, timeout);\n    }\n  }\n\n  clear(assertiveness: Assertiveness) {\n    if (!this.node) {\n      return;\n    }\n\n    if (!assertiveness || assertiveness === 'assertive') {\n      this.assertiveLog.innerHTML = '';\n    }\n\n    if (!assertiveness || assertiveness === 'polite') {\n      this.politeLog.innerHTML = '';\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}